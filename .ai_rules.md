# MICRONOTES (NATIVE C) RULES & PROTOCOLS

## 0. THE IMMUTABLE LAWS
1.  **PROTECTED FILES:** Do NOT delete `.ai_blueprint.md` or `.ai_handoff.md`.
2.  **LANGUAGE:** Pure C11/C17. NO C++ classes (`class`, `std::string`). Use `WCHAR`, `HWND`, `LPCWSTR`.
3.  **COMPILER:** MSVC (`cl.exe`).

## 1. CODING STANDARDS (Win32 Way)
*   **Strings:** Use `WCHAR` everywhere. Wrap literals in `L""` (e.g., `L"Error"`).
*   **Safe I/O:** Use `_s` functions (`wcscpy_s`, `swprintf_s`).
*   **Dialog Procedures:**
    *   Return `INT_PTR`.
    *   Return `TRUE` ONLY if you handled the message.
    *   Return `FALSE` for `WM_INITDIALOG` (if focusing) or unhandled messages so Windows creates default behavior (like toggling checkboxes).

## 2. RESOURCE MANAGEMENT
*   **Encoding:** Ensure `resources.rc` is treated as CP1252 or UTF-16 LE if visual glitches appear. Use `#pragma code_page(65001)` if keeping UTF-8.
*   **IDs:** Maintain sync between `resource.h` and `resources.rc`.

## 3. DOCUMENTATION
*   Update `.ai_handoff.md` after fixes.